<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>動作確認版 Ver.1.3</title>
    <style>
        :root { --bg: #0f0f0f; --accent: #58a6ff; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Helvetica Neue', Arial, sans-serif; overflow: hidden; }
        header { height: 50px; padding: 0 15px; background: rgba(0,0,0,0.9); display: flex; align-items: center; border-bottom: 1px solid #333; position: fixed; top: 0; width: 100%; z-index: 1000; }
        .map-wrapper { position: absolute; top: 50px; bottom: 0; left: 0; right: 0; overflow: auto; background: #000; }
        .map-content { position: relative; width: 1200px; height: 675px; }
        .map-img { position: absolute; top: 0; left: 0; width: 1200px; height: 675px; display: block; pointer-events: none; }
        .train { position: absolute; width: 26px; height: 16px; border-radius: 2px; border: 1.5px solid #fff; transform: translate(-50%, -50%); z-index: 100; transition: all 1.5s linear; box-shadow: 0 0 10px rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; }
        .train-label { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.85); color: #fff; padding: 2px 7px; border-radius: 4px; font-size: 10px; font-weight: bold; white-space: nowrap; display: flex; flex-direction: row; align-items: center; gap: 5px; border: 1px solid #444; z-index: 110; }
        .label-kudari { left: 100%; margin-left: 8px; }
        .sy-1 { background-color: #ff4c7c; }
        .unyo-no { color: #ffeb3b; }
        .dest-text { color: #fff; background: #333; padding: 0 3px; border-radius: 2px; }
    </style>
</head>
<body>

<header><h1 style="font-size:14px;">システム動作テスト中（GitHub読み込みなし）</h1></header>

<div class="map-wrapper">
    <div class="map-content">
        <img src="image.png" class="map-img" onerror="this.style.background='#222'">
        <div id="trainLayer"></div>
    </div>
</div>

<script>
// --- 1. 座標データ (一部抜粋してテスト) ---
const posCoords = {
    "E001_1": {x: 149, y: 135},
    "D002":   {x: 366, y: 163},
    "E048_1": {x: 780, y: 147} // 相模原線
};

// --- 2. 運用データをコード内に直接書く (GitHubを使わないテスト) ---
const testUnyoMap = {
    "5600": "12K",
    "5001": "12K",
    "8123": "14K"
};

function update() {
    const layer = document.getElementById('trainLayer');
    layer.innerHTML = ""; // クリア

    // --- 3. 強制的にテスト用の電車を表示する ---
    const testTrains = [
        { tr: "5600", pos: "E001_1", dest: "橋本", sy: "1" },
        { tr: "8123", pos: "E048_1", dest: "新",   sy: "1" }
    ];

    testTrains.forEach(p => {
        const base = posCoords[p.pos];
        if (!base) return;

        const unyo = testUnyoMap[p.tr] || "--"; // ここで12Kなどが出るかチェック

        const el = document.createElement('div');
        el.className = `train sy-${p.sy}`;
        el.style.left = `${base.x}px`;
        el.style.top = `${base.y}px`;

        el.innerHTML = `
            <div class="train-label label-kudari">
                <span class="unyo-no">${unyo}</span>
                <span class="dest-text">${p.dest}</span>
                <span>${p.tr}</span>
            </div>`;
        layer.appendChild(el);
    });
}

// 起動時に実行
update();
</script>
</body>
</html>
